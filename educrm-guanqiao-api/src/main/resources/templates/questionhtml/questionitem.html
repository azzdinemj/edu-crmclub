<!--<#include "../../commons/top.ftl" />-->
<!--<#include "../../commons/left.ftl" />-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"> </meta>
    <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">-->
    <!--<meta name="description" content="">-->
    <!--<meta name="author" content="">-->

    <title></title>
    <link href="/css/bootstrap.min.css" type="text/css" rel="stylesheet"> </link>
    <link href="/css/bootstrap-datetimepicker.min.css" type="text/css" rel="stylesheet"> </link>
    <link href="/css/plug/bootstrapValidator.min.css" type="text/css" rel="stylesheet"> </link>
    <link href="/css/style.default.css" rel="stylesheet"> </link>
    <link rel="stylesheet" type="text/css" href="/css/datepicker.css"> </link>

    <link rel="stylesheet" type="text/css" href="/css/dataTables.bootstrap.css"> </link>
    <link rel="stylesheet" type="text/css" href="/css/bootstrap-dialog.css"> </link>
    <link rel="stylesheet" type="text/css" href="/css/bootstrap-notify.css"> </link>
    <link rel="stylesheet" type="text/css" href="/css/tree.css"> </link>
    <link rel="stylesheet" type="text/css" href="/css/jquery-ui.min.css"> </link>
    <link rel="stylesheet" type="text/css" href="/plus/Bootstrap-select/css/bootstrap-select.min.css"> </link>
    <link rel="stylesheet" href="/css/TreeGrid.css" /> </link>
    <link rel="stylesheet" href="/layer/skin/layer.css" /> </link>
    <link rel="stylesheet" href="/layer/skin/layer.ext.css" /> </link>
    <link rel="stylesheet" href="/css/course.css" /> </link>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <![endif]-->

</head>

<body>


<!-- Preloader -->
<div id="preloader">
    <div id="status"><i class="fa fa-spinner fa-spin"></i></div>
</div>


<section>
    <div class="mainpanel"><!--mainpanel-->
        <div class="headerbar">

            <a class="menutoggle"><i class="fa fa-bars"></i></a>
            <div class="header-right">
                <ul class="headermenu">
                    <li>
                        <div class="btn-group">
                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                <img src="/images/photos/blog3.jpg" alt=""/>

                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-usermenu pull-right">
                                <li><a href="/signout"><i class="glyphicon glyphicon-log-out"></i> 退出</a></li>
                                <li><a data-toggle="modal" data-target="#modal" data-url="/updatePassword">修改密码</a></li>
                            </ul>
                        </div>
                    </li>

                </ul>
            </div><!-- header-right -->

        </div><!-- headerbar -->

        <!--top-->


        <!--left-->

        <div class="leftpanel">


            <div class="logopanel">
                <h1><span>[</span> 冠桥 <span>]</span></h1>
            </div><!-- logopanel -->
            <div class="leftpanelinner">

                <!-- This is only visible to small devices -->
                <div class="visible-xs hidden-sm hidden-md hidden-lg">
                    <div class="media userlogged">
                        <img alt="" src="/images/photos/blog3.jpg" class="media-object"> </img>
                        <div class="media-body">
                            <h4>Mike</h4>
                            <span>"..."</span>
                        </div>
                    </div>

                    <h5 class="sidebartitle actitle">账户</h5>
                    <ul class="nav nav-pills nav-stacked nav-bracket mb30">
                        <li><a href="/signout"><i class="fa fa-sign-out"></i> <span>退出</span></a></li>
                    </ul>
                </div>
                <!--导航===================================-->
                <!-- <h5 class="sidebartitle">导航菜单</h5>-->
                <ul class="nav nav-pills nav-stacked nav-bracket" id="sysMenuId">
                    <li><a href="/signon"><i class="fa fa-home"></i> <span>首页</span></a></li>
                    <!--<li class="nav-parent"><a href=""><i class="fa fa-edit"></i> <span></span></a>-->

                    <li class="nav-parent nav-active active"><a href=""><i class="fa fa-bookmark"></i> <span>市场管理</span></a>
                        <ul class="children" style="display: block;">
                            <li class="active"><a href="/student/studentSignup/query"><i class="fa fa-caret-right"></i>意向学生</a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-parent"><a href=""><i class="fa fa-group"></i> <span>教学管理</span></a>
                        <ul class="children">
                            <li><a href="/classinfo/classinfo/query"><i class="fa fa-caret-right"></i> 新生开班</a></li>
                            <li><a href="/classinfo/classon/query"><i class="fa fa-caret-right"></i> 班级升学</a></li>
                            <li><a href="/classinfo/classreturn/query"><i class="fa fa-caret-right"></i> 学生转班</a></li>
                            <li><a href="/student/studentSignups/query"><i class="fa fa-caret-right"></i> 学生报名</a></li>
                        </ul>
                    </li>
                    <li class="nav-parent"><a href=""><i class="fa fa-file-text"></i> <span>教务管理</span></a>
                        <ul class="children">
                            <li><a href="/student/student/query"><i class="fa fa-caret-right"></i>学生档案</a></li>
                        </ul>
                    </li>
                    <li class="nav-parent"><a href=""><i class="fa fa-money"></i> <span>财务管理</span></a>
                        <ul class="children">
                            <li><a href="/finance/receivable/query"><i class="fa fa-caret-right"></i>应收款</a></li>
                            <li><a href="/stuReceiv/geStutreceivList"><i class="fa fa-caret-right"></i>学生收费</a></li>
                            <li><a href="/finance/expenseItem/query"><i class="fa fa-caret-right"></i>费用项目</a></li>
                        </ul>
                    </li>
                    <li class="nav-parent"><a href=""><i class="fa fa-user"></i> <span>人事管理</span></a>
                        <ul class="children">
                        </ul>
                    </li>
                    <li class="nav-parent"><a href=""><i class="fa fa-hdd-o"></i> <span>宿舍管理</span></a>
                        <ul class="children">

                        </ul>
                    </li>
                    <li class="nav-parent"><a href=""><i class="fa fa-signal"></i> <span>报表分析</span></a>
                        <ul class="children">
                            <li><a href=""><i class="fa fa-caret-right"></i>校区业绩报表</a></li>
                            <li><a href=""><i class="fa fa-caret-right"></i>校区学生变动情况</a></li>
                            <li><a href=""><i class="fa fa-caret-right"></i>项目业绩报表</a></li>
                        </ul>
                    </li>
                    <li class="nav-parent"><a href=""><i class="fa fa-flag-o"></i> <span>基础资料</span></a>
                        <ul class="children">
                            <li><a href="/system/domain/query"><i class="fa fa-caret-right"></i>校区管理</a></li>
                            <li><a href="/system/department/query"><i class="fa fa-caret-right"></i>部门资料</a></li>
                            <li><a href="/classinfo/classTime/query"><i class="fa fa-caret-right"></i>上课时间</a></li>
                            <li><a href="/classinfo/classRoom/query"><i class="fa fa-caret-right"></i>教室维护</a></li>
                            <li><a href="/system/sysDict/query"><i class="fa fa-caret-right"></i>数据字典</a></li>
                        </ul>
                    </li>
                    <li class="nav-parent"><a href=""><i class="fa fa-cogs"></i> <span>系统管理</span></a>
                        <ul class="children">
                            <li><a href="/system/sysUser/query"><i class="fa fa-caret-right"></i>用户管理</a></li>
                            <li><a href="/system/sysRole/query"><i class="fa fa-caret-right"></i>角色管理</a></li>
                            <li><a href="/system/sysAutocode/query"><i class="fa fa-caret-right"></i>编码规则</a></li>
                            <li><a href="/log/userlog"><i class="fa fa-caret-right"></i>操作日志</a></li>
                        </ul>
                    </li>

                </ul>
                <!--  导航结束-->


            </div><!-- leftpanelinner -->
        </div><!-- leftpanel -->

        <!--left-->

<form class="look form-ajax" method="POST" id="formId" action="/guanqiao/questionItem/save" data-target="/guanqiao/questionItem/query" >
<div class="contentpanel">
    <div class="pageheader">
        <h2><i class="fa fa-bookmark"></i>添加题目<span>...</span></h2>
        <div class="breadcrumb-wrapper">
            <div class="btn-group fr title-btn">
                <a class="btn btn-sm btn-newblue" onClick="javascript:history.back(-1);">返回</a>
                <input class="btn btn-sm btn-newblue" type="submit"  id="saveItem" value="保存">
            </div>
        </div>
    </div>

    <!--content-->
    <div class="panel panel-default pl35 zhpanel">

            <input name="id" type="hidden" >

            <div class="form-group">
                <label class="control-label col-xs-2 col-md-2">选择课程类型</label>
                <div class="col-sm-10">
                    <select id="select_id" onchange="getproduct()" name="pkSysDictValues" class="form-control">
                    </select>

                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-xs-2 col-md-2">课程</label>
                <div class="col-sm-10">
                    <select id="select_idProduct" name="questionsSubjectId" class="form-control">
                    </select>

                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-top"> 题目类型:</label>

                <div class="col-sm-10">
                    <input  type="radio" name="type" checked="checked" onclick="changec(1);" size="70" value="1">单选题&nbsp;&nbsp;
                    <input  type="radio" name="type"  onclick="changec(3);" size="70" value="3">判断题&nbsp;&nbsp;
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-top"> 题干:</label>

                <div class="col-sm-10">
                    <textarea id="title"  class="validate[required] editor" style="width:100%;height:200px" name="title" placeholder="题干" data-bv-notempty="" data-bv-notempty-message="题干">

                    </textarea>
                </div>
            </div>

            <div id="co_1">
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-top"> 选项数量：</label>

                    <div class="col-sm-10">
                        <div class="pos-rel">
                            <select id="partnum"  name="partnum1" >
                                <option  value="4" selected="selected" > 4项 </option>
                                <option  value="5"> 5项 </option>
                                <option  value="6"> 6项 </option>
                                <option  value="7"> 7项 </option>
                            </select>
                        </div>

                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-top"> 选项：</label>

                    <div class="col-sm-10">
                        <div class="pos-rel">
                            <textarea class="editor" id="choice1" name="choice1" style="width:100%;height:200px" >

                            </textarea>
                        </div>

                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-top"> 答案：</label>

                    <div class="col-sm-10">
                        <div class="pos-rel">
                                    <input  type="radio" name="result1"   value="A" />选项A：
                                    <input  type="radio" name="result1"   value="B" />选项B：
                                    <input  type="radio" name="result1"   value="C" />选项C：
                                    <input  type="radio" name="result1"   value="D" />选项D：
                                    <input  type="radio" name="result1"   value="E" />选项E：
                                    <input  type="radio" name="result1"   value="F" />选项F：
                                    <input  type="radio" name="result1"   value="G" />选项G：
                        </div>

                    </div>
                </div>
            </div>

            <div id="co_3" style="display:none">

                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-top"> 答案：</label>

                    <div class="col-sm-10">
                        <div class="pos-rel">
                            <input  type="radio"  name="result3" checked="checked"  value="1" />TRUE&nbsp;&nbsp;
                            <input  type="radio" name="result3"   value="0" />FALSE
                        </div>

                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label no-padding-top"> 答案解析：</label>

                <div class="col-sm-10">
                    <div class="pos-rel">
                        <textarea class="editor" id="analysis" name="analysis" style="width:100%;height:200px" ></textarea>
                    </div>

                </div>
            </div>



    </div>
    <!--content-->


</div>
</form>
<!--<#include "../../commons/footer.ftl"/>-->

        <!-- foot-->
</section>
<div id="modal" class="modal"></div>
<script src=" /js/jquery-1.11.1.min.js"></script>
<script src=" /js/jquery-migrate-1.2.1.min.js"></script>
<script src=" /js/bootstrap.min.js"></script>
<script src=" /js/modernizr.min.js"></script>
<script src=" /js/jquery.sparkline.min.js"></script>
<script src=" /js/toggles.min.js"></script>
<script src=" /js/retina.min.js"></script>
<script src=" /js/jquery.cookies.js"></script>


<script src=" /js/html5shiv.js"></script>
<script src=" /js/respond.min.js"></script>
<script type="text/javascript" src=" /js/uncompressed/moment.js"></script>
<script type="text/javascript" src=" /js/uncompressed/daterangepicker.js"></script>
<script type="text/javascript" src=" /js/TreeGrid.js"></script>
<script type="text/javascript" src=" /js/application.js"></script>
<script type="text/javascript" src=" /js/ajaxfileupload.js"></script>

<script src=" /js/jquery.datatables.min.js"></script>
<script src=" /js/jquery-ui.min.js"></script>
<script type="text/javascript" language="javascript" src=" /js/dataTables.bootstrap.js"></script>

<script src=" /js/login/bootstrapValidator.min.js"></script>
<script src=" /js/login/bootstrap-notify.js"></script>

<script src=" /js/custom.js?v=1"></script>
<script src=" /js/jquery.ztree.core.js"></script>
<script src=" /js/jquery.ztree.excheck.js"></script>
<script src=" /js/jquery.ztree.exedit.js"></script>
<script src=" /plus/Bootstrap-select/js/bootstrap-select.js"></script>
<script src=" /js/bootstrap-datetimepicker.min.js"></script>
<script src=" /js/bootstrap-datetimepicker.zh-CN.js"></script>
<script src=" /js/function.js?v=3"></script>
<script src=" /js/wuxue-common.js"></script>

<script src=" /js/kindeditor/kindeditor-all.js"></script>
<script src=" /js/kindeditor/lang/zh-CN.js"></script>

<script src=" /layer/layer.min.js"></script>
</body>
</html>
<!-- foot-->


<script type="text/javascript">

    KindEditor.ready(function(K) {
        window.editor = K.create('.editor',{
            themeType: 'simple',
            resizeType: 1,
            items : [
                'source', '|', 'undo', 'redo', '|', 'preview', 'print', 'template', 'cut', 'copy', 'paste',

                'plainpaste', 'wordpaste', '|', 'justifyleft', 'justifycenter', 'justifyright',

                'justifyfull', 'insertorderedlist', 'insertunorderedlist', 'indent', 'outdent', 'subscript',

                'superscript', 'clearhtml', 'quickformat', 'selectall', '|', 'fullscreen', '|',

                'formatblock', 'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold',

                'italic', 'underline', 'strikethrough', 'lineheight', 'removeformat', '|',

                'table', 'hr', 'emoticons', 'pagebreak', 'anchor', 'link', 'unlink', '|', 'about'

            ],
            allowFileManager: true,
            afterBlur: function(){this.sync();}

        });
    });

    function changec(v) {

        for(i=1;i<=6;i++){
            if(v==i){
                $("#co_"+i).show();
            }else{
                $("#co_"+i).hide();
            }
        }
    }


    //题目主键
    var pk=getParam("id");

    $(function () {
        getproductType();
        var options=$("#select_id option:selected").val() ; //获取课程类型选中的项
        getproduct(options);
        if(pk){
            editQuery();
        }
    })

    //获取课程（产品）类型
    function getproductType(){
        $.ajax({
            url:"/guanqiao/product/getSysdictsValues",
            data:{
                pkSysDict:"guanqiaoProductType"
            },
            type:"GET",
            dataType:"json",
            async:false,
            success:function (data) {
                if(data.code==0){
                    var arr = data.data;
                    var option=""
                    $.each(arr,function (i) {
                        if(arr[i].pkSysDictValues!=201830497523622781){ //排除体验课
                            option +="<option  value='"+arr[i].pkSysDictValues+"'>"+arr[i].caption+"</option>";
                        }
                    });
                    $(option).appendTo("#select_id");
                }
            },
            error:function () {
                alert("error!!");
            }
        })
    }

    //获取课程（产品）
    function getproduct(productType){

        if(!productType){
            productType=$("#select_id option:selected").val() ; //获取选中的项
        }
        $.ajax({
            url:"/guanqiao/product/queryByPagingList",
            data:{
                start:"1",
                length:"500",
                status:"1",
                pkDomain:"gq",
                productType:productType
            },
            type:"GET",
            dataType:"json",
            async:false,
            success:function (data) {

                //if(data.iTotalRecords>0){
                    var arr = data.aaData;
                    $("#select_idProduct").empty();//清空select
                    var option="";
                    if(arr){ //有课程
                        $.each(arr,function (i) {
                            option +="<option  value='"+arr[i].pkProduct+"'>"+arr[i].caption+"</option>";
                        });
                        $(option).appendTo("#select_idProduct");
                    }else{  //无课程
                        $(option).appendTo("#select_idProduct");
                    }

                //}
            },
            error:function () {
                alert("error!!");
            }
        })
    }


    //加载编辑的题目
    function  editQuery() {
        $.ajax({
            url:"/guanqiao/questionItem/findbypk",
            type:"POST",
            data:{
                "id":pk
            },
            async:false,
            success:function (data){
                if(data.code==0){

                    $("input[name='id']").val(data.data.id);

                    //课程类型
                    $("#select_id").find("option[value='"+data.data.pkSysDictValues+"']").attr("selected",true);

                    getproduct(data.data.pkSysDictValues);
                    //课程
                    $("#select_idProduct").find("option[value='"+data.data.questionsSubjectId+"']").attr("selected",true);

                    //切换 题型
                    changec(data.data.type);
                    //选中题型
                    $("input[type=radio][name=type][value='"+data.data.type+"']").attr("checked",true);
                    //题干
                    $("#title").attr("value",data.data.title);

                    if(data.data.type==1){ //选择
                        //选项数量
                        $("#partnum").find("option[value='"+data.data.partnum+"']").attr("selected",true);
                        //选项
                        $("#choice1").attr("value",data.data.option);

                        // 答案选项   //设置value的项目为当前选中项
                        $("input[name=result1][value='"+data.data.answer+"']").attr("checked",true);

                    }else{  //判断题
                        // 答案 true/false
                        $("input[name=result3][value='"+data.data.answer+"']").attr("checked",true);
                    }

                    //解析
                    $("#analysis").attr("value",data.data.analysis);

                }else{
                    Notify.danger(data.message)
                }

             },
            error:function (data) {
                alert("error!!!");
            }

        })
        
    }


</script>